<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mars Mission 3D Visualization</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div id="container">
        <!-- 3D Canvas Container -->
        <div id="canvas-container"></div>
        
        <!-- UI Overlay -->
        <div id="ui-overlay">
            <!-- Header -->
            <div id="header">
                <h1>üöÄ Mars Mission 3D Visualization</h1>
                <div id="connection-status" class="status disconnected">‚óè Disconnected</div>
            </div>
            
            <!-- Control Panel -->
            <div id="control-panel">
                <h3>‚öôÔ∏è Mission Controls</h3>
                
                <!-- Playback Controls -->
                <div class="control-group">
                    <label>Playback</label>
                    <div class="button-group">
                        <button id="btn-start" class="btn btn-primary">‚ñ∂ Start</button>
                        <button id="btn-pause" class="btn btn-warning">‚è∏ Pause</button>
                        <button id="btn-stop" class="btn btn-danger">‚èπ Stop</button>
                    </div>
                </div>
                
                <!-- Time Speed Control -->
                <div class="control-group">
                    <label>Time Speed: <span id="speed-value">0.5</span>x</label>
                    <input type="range" id="time-speed" min="0.1" max="5" step="0.1" value="0.5">
                </div>
                
                <!-- Timeline -->
                <div class="control-group">
                    <label>Timeline: Day <span id="current-day">0</span> / <span id="total-days">0</span></label>
                    <input type="range" id="timeline" min="0" max="1000" step="1" value="0">
                    <div class="timeline-labels">
                        <span>Launch</span>
                        <span>Mars Arrival</span>
                        <span>Mars Departure</span>
                        <span>Earth Return</span>
                    </div>
                </div>
                
                <!-- View Mode -->
                <div class="control-group">
                    <label>View Mode</label>
                    <select id="view-mode">
                        <option value="free">Free Camera</option>
                        <option value="earth">Follow Earth</option>
                        <option value="mars">Follow Mars</option>
                        <option value="spacecraft">Follow Spacecraft</option>
                        <option value="top">Top View</option>
                    </select>
                </div>
            </div>
            
            <!-- Data Panel -->
            <div id="data-panel">
                <h3>üìä Mission Data</h3>
                
                <div class="data-section">
                    <h4>Mission Phase</h4>
                    <div id="phase-display" class="phase-badge pre-launch">Pre-Launch</div>
                </div>
                
                <div class="data-section">
                    <h4>Positions (AU)</h4>
                    <div class="data-row">
                        <span class="label earth">üåç Earth:</span>
                        <span id="earth-pos">(0.00, 0.00, 0.00)</span>
                    </div>
                    <div class="data-row">
                        <span class="label mars">üî¥ Mars:</span>
                        <span id="mars-pos">(0.00, 0.00, 0.00)</span>
                    </div>
                    <div class="data-row">
                        <span class="label ship">üöÄ Spacecraft:</span>
                        <span id="ship-pos">(0.00, 0.00, 0.00)</span>
                    </div>
                </div>
                
                <div class="data-section">
                    <h4>Distances (AU)</h4>
                    <div class="data-row">
                        <span class="label">Earth-Mars:</span>
                        <span id="earth-mars-dist">0.00 AU</span>
                    </div>
                    <div class="data-row">
                        <span class="label">Mission Progress:</span>
                        <div class="progress-bar">
                            <div id="mission-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                
                <div class="data-section">
                    <h4>Velocities (AU/day)</h4>
                    <div class="data-row">
                        <span class="label earth">Earth:</span>
                        <span id="earth-vel">0.00</span>
                    </div>
                    <div class="data-row">
                        <span class="label mars">Mars:</span>
                        <span id="mars-vel">0.00</span>
                    </div>
                </div>
            </div>
            
            <!-- Legend -->
            <div id="legend">
                <h3>üé® Legend</h3>
                <div class="legend-item">
                    <span class="legend-color" style="background: #ffff00;"></span>
                    <span>Sun</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #4169e1;"></span>
                    <span>Earth</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #dc143c;"></span>
                    <span>Mars</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #00ff00;"></span>
                    <span>Spacecraft</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: rgba(255, 255, 255, 0.3);"></span>
                    <span>Orbit Paths</span>
                </div>
            </div>
            
            <!-- Info Button -->
            <button id="info-btn" class="info-button">‚ÑπÔ∏è</button>
        </div>
        
        <!-- Info Modal -->
        <div id="info-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Mars Mission 3D Visualization</h2>
                <p>This interactive 3D visualization demonstrates a round-trip Mars mission using real orbital mechanics.</p>
                
                <h3>Mission Phases:</h3>
                <ul>
                    <li><strong>Pre-Launch:</strong> Spacecraft on Earth</li>
                    <li><strong>Earth-Mars Transfer:</strong> ~259 days using Hohmann transfer</li>
                    <li><strong>On Mars:</strong> ~454 days waiting for optimal return window</li>
                    <li><strong>Mars-Earth Transfer:</strong> ~259 days return journey</li>
                    <li><strong>Complete:</strong> Mission accomplished</li>
                </ul>
                
                <h3>Controls:</h3>
                <ul>
                    <li><strong>Left Mouse:</strong> Rotate view</li>
                    <li><strong>Right Mouse:</strong> Pan view</li>
                    <li><strong>Scroll:</strong> Zoom in/out</li>
                    <li><strong>Time Speed:</strong> Adjust simulation speed</li>
                    <li><strong>View Mode:</strong> Change camera perspective</li>
                </ul>
                
                <h3>Technical Details:</h3>
                <p>Uses real planetary orbital parameters from JPL data including eccentricity, inclination, and semi-major axis. Transfer orbits follow Hohmann trajectory calculations.</p>
            </div>
        </div>
    </div>

    <!-- Three.js libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>

    <script src="/static/spacecraft.js?v=10"></script>
    <script src="/static/orbit.js"></script>
    <script src="/static/main.js?v=6"></script>
    <script src="/static/controls.js"></script>
    <script src="/static/ui.js"></script>
</body>
</html>
