<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mars Mission | Command Center</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div id="container">
        <!-- 3D Canvas -->
        <div id="canvas-container"></div>
        
        <!-- UI Overlay: Grid Layout -->
        <div id="ui-overlay">
            <!-- 1. Top Bar -->
            <header id="header">
                <div class="brand">
                    <h1>MARS MISSION <span class="brand-version">V1.0</span></h1>
                </div>
                <div class="header-right">
                    <div id="connection-status" class="status-indicator">
                        <span class="status-dot"></span>
                        <span class="status-text">System Offline</span>
                    </div>
                    <button id="btn-hud" class="btn-icon btn-icon--small" type="button" title="Toggle HUD (H)" aria-pressed="false">HUD</button>
                </div>
            </header>

            <!-- 2. Left Panel: Mission Intelligence -->
            <aside id="left-panel" class="glass-panel">
                <div class="panel-header panel-header--with-actions">
                    <h3>Mission Intelligence</h3>
                    <button id="btn-left-panel" class="panel-toggle" type="button" aria-expanded="true" title="Toggle Mission panel">◂</button>
                </div>
                
                <div class="data-item">
                    <div class="data-label">Current Phase</div>
                    <div id="phase-badge" class="phase-badge">Detecting...</div>
                </div>

                <div class="data-item">
                    <div class="data-label">Mission Progress</div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div id="mission-progress"></div>
                        </div>
                    </div>
                </div>

                <div class="data-item">
                    <div class="data-label">Earth-Mars Distance</div>
                    <div id="earth-mars-dist" class="data-value">0.000 AU</div>
                </div>

                <div class="data-item divider">
                    <div class="data-label">Telemetry (AU)</div>
                    <div class="data-row">
                        <span class="label earth">Earth</span>
                        <span id="earth-pos" class="data-value coord">(0.00, 0.00, 0.00)</span>
                    </div>
                    <div class="data-row">
                        <span class="label mars">Mars</span>
                        <span id="mars-pos" class="data-value coord">(0.00, 0.00, 0.00)</span>
                    </div>
                </div>
            </aside>

            <!-- 3. Right Panel: Craft Telemetry -->
            <aside id="right-panel" class="glass-panel">
                <div class="panel-header panel-header--with-actions">
                    <h3>Craft Telemetry</h3>
                    <button id="btn-right-panel" class="panel-toggle" type="button" aria-expanded="true" title="Toggle Telemetry panel">▸</button>
                </div>

                <div class="data-item">
                    <div class="data-label">Craft Position (AU)</div>
                    <div id="ship-pos" class="data-value coord highlight">(0.00, 0.00, 0.00)</div>
                </div>

                <div class="data-item">
                    <div class="data-label">Environmental Velocity</div>
                    <div class="data-row">
                        <span class="label">Earth Rel</span>
                        <span id="earth-vel" class="data-value">0.0000</span>
                    </div>
                    <div class="data-row">
                        <span class="label">Mars Rel</span>
                        <span id="mars-vel" class="data-value danger">0.0000</span>
                    </div>
                </div>

                <div class="data-item divider">
                    <div class="data-label">Camera Interface</div>
                    <select id="view-mode">
                        <option value="free">Tactical: Free Camera</option>
                        <option value="earth">Focus: Earth Orbit</option>
                        <option value="mars">Focus: Mars Orbit</option>
                        <option value="spacecraft">Focus: Spacecraft</option>
                        <option value="top">Orrery: Top Down</option>
                    </select>
                </div>

                <div id="legend" class="legend">
                    <div class="data-label legend-title">Visual Legend</div>
                    <div class="legend-list">
                        <div class="legend-item">
                            <span class="legend-dot sun"></span> Sun
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot earth"></span> Earth
                        </div>
                        <div class="legend-item">
                            <span class="legend-dot mars"></span> Mars
                        </div>
                    </div>
                </div>
            </aside>

            <!-- 4. Bottom Center: Cinema Bar -->
            <footer id="bottom-bar" class="glass-panel">
                <div class="playback-group">
                    <button id="btn-start" class="btn-icon" title="Start">▶</button>
                    <button id="btn-pause" class="btn-icon" title="Pause">⏸</button>
                    <button id="btn-stop" class="btn-icon" title="Reset">⏹</button>
                </div>

                <div class="timeline-container" id="timeline-container">
                    <div class="timeline-info">
                        <span>T+ Day <span id="current-day">0</span></span>
                        <span>Horizon Limit: <span id="total-days">0</span> Days</span>
                    </div>
                    <div class="timeline-track">
                        <input type="range" id="timeline" min="0" max="1000" step="1" value="0" aria-label="Mission timeline">
                        <div id="timeline-markers" class="timeline-markers" aria-hidden="true"></div>
                        <div id="timeline-tooltip" class="timeline-tooltip" aria-hidden="true"></div>
                    </div>
                </div>

                <div class="view-select-container">
                    <div class="data-label compact">Warp</div>
                    <span id="speed-value" class="mono value-compact">0.5</span>
                    <input type="range" id="time-speed" class="range--compact" min="0.1" max="5" step="0.1" value="0.5">
                </div>
            </footer>

            <!-- 5. Utility -->
            <button id="info-btn" class="btn-icon info-btn-fixed" title="Info" aria-haspopup="dialog" aria-controls="info-modal">?</button>
        </div>
        
        <!-- Modal -->
        <div id="info-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-hidden="true">
            <div class="modal-content glass-panel">
                <button class="close" type="button" aria-label="Close">&times;</button>
                <h2 id="modal-title" class="modal-title">Mission Parameters</h2>
                <div class="modal-body">
                    <p>Dynamic 3D Hohmann Transfer simulation.</p>
                    <ul class="modal-list">
                        <li><strong class="text-strong">Phase 1:</strong> Earth to Mars (Prograde Ellipse)</li>
                        <li><strong class="text-strong">Phase 2:</strong> Mars Surface Operations</li>
                        <li><strong class="text-strong">Phase 3:</strong> Return to Earth</li>
                    </ul>
                    <p class="modal-footer">Interactive visualization powered by Three.js and FastAPI.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>

    <script src="/static/spacecraft.js?v=11"></script>
    <script src="/static/orbit.js"></script>
    <script src="/static/main.js?v=7"></script>
    <script src="/static/controls.js"></script>
    <script src="/static/ui.js"></script>
</body>
</html>
